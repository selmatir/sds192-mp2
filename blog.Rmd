---
title: "Mini-Project 2"
author: "Emma Dennis-Knieriem & Selma Tir"
date: "March 24, 2017"
output: html_document
---


## Loading the data


```{r, include=FALSE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")

library(dplyr)
library(tidyverse)
library(ggplot2)
library(ggthemes)
```

```{r, message=FALSE, warning=FALSE}
candH <- candidates %>%
        filter(cand_office == "H", cand_office_state == "NY") %>%
        select(cand_id, cand_name, cand_party_affiliation, cand_election_yr)

names(house_elections)[names(house_elections) == "fec_id"] <- "cand_id"

elections <- house_elections %>%
            select(cand_id, general_votes, ge_winner) %>%
            filter(general_votes > 0)

contrib <- contributions %>%
          filter(transaction_type == "24E", transaction_amt > 0) %>%
          select(transaction_amt, cand_id)

table1 <- candH %>%
          full_join(elections, by = "cand_id") %>%
          filter(!is.na(ge_winner)) 

table2 <- table1 %>%
          full_join(contrib, by = "cand_id") %>%
          group_by(cand_name) %>%
          mutate(total_money = sum(transaction_amt)) %>%
          filter(cand_party_affiliation== "DEM" | cand_party_affiliation=="REP", !is.na(total_money))

plotscale <- function(Upper_Limit, Y_Title, YBreak1, YBreak2, YBreak3, YBreak4, YBreak5, YBreak6, YLab1, YLab2, YLab3, YLab4, YLab5, YLab6) {
            ggplot(data=table2, aes(x=general_votes, y=total_money)) +
        geom_point(aes(colour=cand_party_affiliation, shape=ge_winner), size=2.5) +
        ggtitle("Number of Votes and Contributions in \nNew York General House Election") +
        xlab("Number of Votes (thousands)") +
        ylab(Y_Title) +
        theme_economist() +
        scale_color_manual(name = "Party", labels = c("DEM", "REP"), values = c("#0006CC", "#CC0000")) +
        scale_shape_discrete(name = "Election's outcome", labels = c("Loss", "Win")) +
        scale_x_continuous(limits=c(0,220000), breaks=c(0,100000,200000), labels = c("0","100","200")) +
        scale_y_continuous(limits=c(0,Upper_Limit), breaks=c(YBreak1, YBreak2, YBreak3, YBreak4, YBreak5, YBreak6), labels=c(YLab1, YLab2, YLab3, YLab4, YLab5, YLab6)) +
        theme(plot.title = element_text(hjust = 0.5),
              legend.title = element_text(size = 11),
              legend.text = element_text(size = 9),
              legend.position = "right",
              axis.title = element_text(size = 11))
}

plotscale(1300000, "Amount of Contribution (in millions of dollars)", 0, 250000, 500000, 750000, 1000000, 1250000, 0, 0.25, 0.50, 0.75, 1.00, 1.25)

plotscale(500000, "Amount of Contribution (in thousands of dollars)", 0, 100000, 200000, 300000, 400000, 500000, 0, 100, 200, 300, 400, 500)

```





This graph represents the relationship between the number of votes (in thousands) and the independent expenditure advocating the election of the candidate(in millions of dollars) republicans and democrates obtained for the 2012 General House election in New York state. 
The data was obtained from the Federal Election Commission based on the 2011-2012 federal election cycle. 
The number of votes and amount of contribution variables have been mapped to the visual dimension position using a scatterplot. Another layer of information concerning the party of the candidate has been mapped to the visual dimension color and the outcome of the election has been mapped to the visual dimension shape. 

What can we learn?
  - Republicans got more contributions than democrats 
  - Democrates got more votes than republicans
  - More democrates ran for the house election, and hence more democrates were elected
  - The two candidates who got the biggest amount of contribution were not elected. 
  
We can observe a negative corrolation between the number of votes and contributions a candidate obtained. Indeed, the candidates who won the election with the biggest number of votes, were the ones who got inferior contributions. This result is interesting since it contrats with the general idea that a candidate with more funds will be able to get more votes. Here, it seems like the 0.5 million dollars separating the two candidates with the most contributions from th eother candidates did not allow them to get more votes. 

The graph allows us to see that there were more democrates running for the 2012 house election than republicans; and there were hence more democrates elected. This highlights the general idea that New York is more of a democratic state.

Background:
As of November 2012, the democratic party hold 21 seats while the republican party only hold 8. As of after the 2012 house elections, the democratic party hold the same number of seats while the republicans lost 2 seats. 
